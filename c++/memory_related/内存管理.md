# C++的内存分区

| 分区名 | Description |
| ------ | ----------- |
| 栈区（Stack Segment）  | 函数内部局部变量的存储单元都在栈上创建，栈内存分配内置于处理器的指令集中，效率很高，但分配的内存容量有限 |
| 未使用内存（Unused Memory） |  |
| 堆区（Heap Segment）    | 由new分配的内存块，编译器不管它们的释放，他们的释放由应用程序负责，如果没有delete，程序结束后，操作系统会自动回收 |
| 全局数据区（Global Data Segment） | 全局变量和静态变量的存储区，主要存放全局变量，全局static变量，局部static变量和常量 |
| 常量区（Constant Segment）| 存放的是常量字符串，不允许修改 |
| 代码区（Code Segment）|  程序的二进制代码，存放所有的函数，无论是全局函数还是成员函数 |

# 类对象的大小及其影响因素
**类对象大小 = 非静态成员的数据类型大小之和 + 编译器加入的额外成员变量（如虚函数表的指针）+ 边缘对齐优化加入的padding**

注：空类（无非静态数据成员）的大小为1（C++中要求对于类的每个实例都必须有独一无二的地址,那么编译器自动为空类分配一个字节大小，这样便保证了每个实例均有独一无二的内存地址），当作基类时，size为0。

**类对象大小的影响因素：**
1. 类的非静态成员变量大小，静态成员不占据类的空间，成员函数也不占据类的空间大小；

2. 内存对齐另外分配的空间大小，类内的数据也是需要进行内存对齐操作的；

3. 虚函数的话，会在类对象插入vptr指针，加上指针大小；

4. 当该类是某类的派生类，那么派生类继承的基类部分的数据成员也会存在在派生类中的空间中，也会对派生类进行扩展。

# this指针相关

**静态成员函数与一般成员函数的唯一区别就是没有this指针。**
